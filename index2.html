<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quiz Trắc Nghiệm CNPM</title>
  <link rel="icon" type="image/png" href="hehe.jpg" 
  style="width: fit-content; height: fit-content;">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f9f9f9;
    }
    .question {
      margin-bottom: 20px;
    }
    .answers button {
      display: block;
      margin: 5px 0;
      padding: 10px;
      border: 1px solid #ccc;
      background: white;
      width: 100%;
      text-align: left;
      cursor: pointer;
      transition: 0.3s;
      border-radius: 8px;
    }
    .answers button:hover {
      background-color: #dcd6d6;
      transform: scale(1.02);
    }
    .answers button.correct {
      background-color: #c8f7c5;
      border-color: #27ae60;
      font-weight: bold;
      color: black;
    }
    .answers button.wrong {
      background-color: #fddede;
      border-color: #e74c3c;
    }
  </style>
</head>
<body>
  <h1>Quiz Trắc Nghiệm CNPM Vinh</h1>
  <div id="stats" style="margin-bottom:20px; font-weight:bold;"></div>
  <div id="quiz"></div>
  <button id="bookmarkBtn" title="Lên đầu trang"
    style="
      position: fixed;
      bottom: 30px;
      right: 30px;
      background: #27ae60;
      color: white;
      border: none;
      border-radius: 50%;
      width: 44px;
      height: 44px;
      font-size: 22px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      z-index: 1000;
      display: none;
    ">↑</button>

  <script>
    const quizData = [
        {
        question: "Thiết kế phần mềm là gì?",
        options: [
          "Quá trình viết mã nguồn",
          "Xác định các thành phần phần mềm và mối liên kết giữa chúng dựa trên yêu cầu của khách hàng",
          "Quá trình kiểm thử phần mềm",
          "Quá trình bảo trì phần mềm"
        ],
        correct: 1
      },
      {
        question: "Mục đích của việc kiểm thử bản release là gì?",
        options: [
          "Để đảm bảo phần mềm hoạt động đúng như mong đợi trước khi phát hành",
          "Để giảm chi phí phát triển",
          "Để tăng tốc độ lập trình",
          "Để làm hài lòng khách hàng"
        ],
        correct: 0
      }
    ];

    const quizContainer = document.getElementById('quiz');
    const statsDiv = document.getElementById('stats');
    // Mảng lưu trạng thái từng câu: null (chưa làm), true (đúng), false (sai)
    const answersState = Array(quizData.length).fill(null);

    // function updateStats() {
    //   const correct = answersState.filter(x => x === true).length;
    //   const wrong = answersState.filter(x => x === false).length;
    //   const notDone = answersState.filter(x => x === null).length;
    //   statsDiv.textContent = `Đúng: ${correct} | Sai: ${wrong} | Chưa làm: ${notDone}`;
    // }
    function updateStats() {
  const correct = answersState.filter(x => x === true).length;
  const wrong = answersState.filter(x => x === false).length;
  const notDone = answersState.filter(x => x === null).length;
  const total = answersState.length;
  const done = correct + wrong;
  const score = ((correct / total) * 10).toFixed(2);

  statsDiv.textContent = `Đúng: ${correct} | Sai: ${wrong} | Chưa làm: ${notDone} | Đã làm: ${done} | Điểm: ${score}/10`;
}

    quizData.forEach((q, i) => {
      const questionDiv = document.createElement('div');
      questionDiv.className = 'question';

      const questionTitle = document.createElement('h3');
      questionTitle.textContent = `Câu ${i + 1}: ${q.question}`;
      questionDiv.appendChild(questionTitle);

      const answersDiv = document.createElement('div');
      answersDiv.className = 'answers';

      q.options.forEach((opt, index) => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        btn.addEventListener('click', () => {
          const allBtns = answersDiv.querySelectorAll('button');
          allBtns.forEach(b => b.disabled = true);
          if (index === q.correct) {
            btn.classList.add('correct');
            answersState[i] = true;
          } else {
            btn.classList.add('wrong');
            allBtns[q.correct].classList.add('correct');
            answersState[i] = false;
          }
          updateStats();
        });
        answersDiv.appendChild(btn);
      });

      questionDiv.appendChild(answersDiv);
      quizContainer.appendChild(questionDiv);
    });

    updateStats();

    // Hiện nút khi cuộn xuống dưới 200px
    const bookmarkBtn = document.getElementById('bookmarkBtn');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 200) {
        bookmarkBtn.style.display = 'block';
      } else {
        bookmarkBtn.style.display = 'none';
      }
    });
    bookmarkBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>
  <button>
    <a href="ktpm.html" style="text-decoration: none;color: black;">Quiz kiểm thử phần mềm</a>
  </button>
</body>
</html>